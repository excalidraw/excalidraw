import type { ExcalidrawImperativeAPI } from "../../packages/excalidraw/types";

export const ActionDraw = async (api: ExcalidrawImperativeAPI) => {
  api.registerAction({
    name: "draw",
    label: "绘图",
    icon: (
      <svg
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="4544"
        width="16"
        height="16"
      >
        <path
          d="M171.9296 435.5072c-5.7856-17.3056-3.6864-36.6592 6.2976-57.9584 9.4208-20.1728 33.4336-51.712 72.0384-94.72 30.976-34.4576 50.432-58.6752 58.368-72.6528 6.144-10.9056 8.0384-17.3056 5.632-19.1488-23.04-17.5104-71.3216-3.9424-144.6912 40.6528A30.72 30.72 0 0 1 137.6256 179.2c97.28-59.0848 168.4992-71.4752 213.76-37.12 30.976 23.552 34.5088 56.32 10.6496 98.4064-10.0864 17.8688-32.1024 45.6704-66.048 83.456-34.56 38.4-55.2448 64.9728-62.1056 79.616-3.072 6.5536-4.3008 10.752-3.6864 12.5952 0.512 1.536 4.2496 3.584 11.1104 6.1952 25.2928 9.6256 76.4416-6.8608 153.4464-49.3568a30.72 30.72 0 1 1 29.696 53.76C330.752 478.464 262.5024 496.128 219.4944 479.7952c-25.088-9.5232-40.96-24.2688-47.616-44.288z m704.1536 104.0384l-357.632 358.2976a51.2 51.2 0 0 1-38.912 14.9504l-135.168-7.0656a51.2 51.2 0 0 1-48.4864-47.7696l-9.0624-138.24a51.2 51.2 0 0 1 14.848-39.5776l357.2736-357.888a51.2 51.2 0 0 1 72.448 0l144.6912 144.9472a51.2 51.2 0 0 1 0 72.3456z m-199.0656-148.48L414.208 654.4384l130.3552 130.3552 262.8096-263.3216a25.6 25.6 0 0 0 0-36.1984l-94.0544-94.208a25.6 25.6 0 0 0-36.2496 0z m-168.704 429.9264L378.0096 690.688l-21.4016 21.4016a25.6 25.6 0 0 0-7.424 19.7632l5.9392 90.3168a25.6 25.6 0 0 0 24.2176 23.8592l87.4496 4.608a25.6 25.6 0 0 0 19.456-7.5264l22.0672-22.1184z"
          p-id="4545"
          fill="#ffffff"
        ></path>
      </svg>
    ),
    perform: async (elements, appState) => {
      alert("register draw");
      return {
        elements,
        appState,
        storeAction: "none",
      };
    },
    custom: true,
    visible: (elements, appState) => true,
  });
};
