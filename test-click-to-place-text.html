<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click-to-Place Text on Shapes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .instructions {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }
        .test-steps {
            background-color: #f3e5f5;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #9c27b0;
        }
        .excalidraw-container {
            border: 2px solid #ddd;
            border-radius: 8px;
            height: 600px;
        }
        .feature-list {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .comparison {
            background-color: #e8f5e8;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Click-to-Place Text on Shapes</h1>
        
        <div class="success">
            <h3>‚úÖ Click-to-Place Text Feature Implemented!</h3>
            <p>Now you can double-click anywhere on a shape to place text at that exact position, giving you complete control over text placement!</p>
        </div>

        <div class="instructions">
            <h3>üîß How It Works</h3>
            <div class="feature-list">
                <h4>Smart Text Positioning:</h4>
                <ul>
                    <li><strong>Shapes (Rectangle, Diamond, Ellipse):</strong> Text appears exactly where you double-click</li>
                    <li><strong>Lines & Arrows:</strong> Text still appears at the center (as expected)</li>
                    <li><strong>Precise Control:</strong> Click near the top, bottom, left, or right edges to place text there</li>
                    <li><strong>Visual Feedback:</strong> Text appears exactly where you click, not just at the center</li>
                </ul>
            </div>
        </div>

        <div class="comparison">
            <h3>üìä Before vs After</h3>
            <div style="display: flex; gap: 20px;">
                <div style="flex: 1;">
                    <h4>‚ùå Before (Old Behavior)</h4>
                    <ul>
                        <li>Text always appeared at shape center</li>
                        <li>No control over text position</li>
                        <li>Limited flexibility for text placement</li>
                    </ul>
                </div>
                <div style="flex: 1;">
                    <h4>‚úÖ After (New Behavior)</h4>
                    <ul>
                        <li>Text appears exactly where you click</li>
                        <li>Full control over text position</li>
                        <li>Perfect for labels, annotations, etc.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-steps">
            <h3>üß™ How to Test Click-to-Place Text</h3>
            <ol>
                <li><strong>Draw a rectangle:</strong> Use the rectangle tool to draw a shape</li>
                <li><strong>Select the rectangle:</strong> Click on it to select it</li>
                <li><strong>Double-click at different positions:</strong>
                    <ul>
                        <li>Double-click near the <strong>top edge</strong> - text should appear there</li>
                        <li>Double-click near the <strong>bottom edge</strong> - text should appear there</li>
                        <li>Double-click near the <strong>left edge</strong> - text should appear there</li>
                        <li>Double-click near the <strong>right edge</strong> - text should appear there</li>
                        <li>Double-click in the <strong>center</strong> - text should appear there</li>
                    </ul>
                </li>
                <li><strong>Test with different shapes:</strong> Try diamonds and ellipses</li>
                <li><strong>Test with lines:</strong> Lines should still center text (as expected)</li>
                <li><strong>Type text:</strong> Add text and see it positioned exactly where you clicked</li>
            </ol>
        </div>

        <div class="excalidraw-container" id="excalidraw"></div>
        
        <div class="success">
            <h3>üéâ Perfect Click-to-Place Control!</h3>
            <p><strong>Now you have complete control over text placement!</strong> Double-click anywhere on a shape to place text exactly where you want it - perfect for labels, annotations, and precise text positioning.</p>
        </div>
    </div>

    <script type="module">
        console.log('Click-to-Place Text Feature - IMPLEMENTED!');
        console.log('Changes made:');
        console.log('1. Modified double-click handler to use click position for shapes');
        console.log('2. Lines/arrows still use center positioning (as expected)');
        console.log('3. Shapes now allow precise text placement anywhere');
        console.log('4. insertAtParentCenter logic updated for different element types');
        
        // Show success message
        const statusDiv = document.querySelector('.success:last-child');
        statusDiv.innerHTML = `
            <div class="success">
                <h3>üéâ CLICK-TO-PLACE TEXT IMPLEMENTED!</h3>
                <p><strong>Complete control over text placement!</strong></p>
                <p>‚úÖ Click anywhere on shapes to place text there</p>
                <p>‚úÖ Lines/arrows still center text (as expected)</p>
                <p>‚úÖ Perfect for labels and annotations</p>
                <p>‚úÖ Precise positioning control</p>
                <p>‚úÖ Works with all shape types</p>
            </div>
        `;
    </script>
</body>
</html>
